{"mappings":"AAAA,MAGMA,EAAOC,SAASC,cAAc,gBAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAcH,SAASC,cAAc,cAC3C,IAAIG,EAGAC,EA2BJC,eAAeC,EAAcC,GAE3B,MAAMC,EAAM,qEAA6CD,EAAOE,MAC7DC,MAAM,KACNC,KACC,iFAC4ER,IAChFS,QAAQC,IAAIL,GACZ,MAAMM,QAAiBC,MAAMP,GACvBQ,QAAaF,EAASG,OAG5B,GAFAL,QAAQC,IAAI,qBAAqBG,EAAKE,wBAElCF,EAAKE,UAAY,GAAKf,EAAa,GAIvC,OAAOa,EAAKG,KAAKC,KAAIC,IACZ,CACLC,aAAcD,EAAIC,aAClBC,cAAeF,EAAIE,cACnBC,KAAMH,EAAIG,KACVC,MAAOJ,EAAII,MACXC,MAAOL,EAAIK,MACXC,SAAUN,EAAIM,SACdC,UAAWP,EAAIO,cAXjBhB,QAAQC,IAAI,6D,CAkBhBR,eAAewB,EAAcC,GAC3B,GAAKA,EAAMC,OAQT,OAAOD,EAAMV,KACXC,GACE,+CACYA,EAAIC,sBAAsBD,EAAIG,iHAGxBH,EAAII,mFAGJJ,EAAIK,sFAGDL,EAAIM,0FAGHN,EAAIO,4DAtB9BhB,QAAQC,IACN,4EAEFZ,EAAQ+B,UAAY,GACpB9B,EAAY+B,UAAUC,IAAI,kB,CAlE9BpC,EAAKqC,iBAAiB,UAItB9B,eAA4B+B,GAC1BA,EAAMC,iBACNlC,EAAa,EACb,IACEmC,UAAUC,YAAEA,IACVH,EAAMI,cACVpC,EAAcmC,EACd,IACE,MAAME,QAAanC,EAAciC,GAC3BG,QAAiBb,EAAcY,GACrCxC,EAAQ+B,UAAYU,EAAS/B,KAAK,IAClCT,EAAY+B,UAAUU,OAAO,kB,CAC7B,MAAOC,GACPhC,QAAQC,IAAI+B,EAAMC,Q,KAhBtB3C,EAAYiC,iBAAiB,SAoB7B9B,iBACEF,GAAc,EACd,MAAMsC,QAAanC,EAAcF,GACjC,IAAI0C,EAAW,GACfA,SAAkBjB,EAAcY,GAChCxC,EAAQ+B,UAAYc,C","sources":["src/index.js"],"sourcesContent":["const API_key = '30945884-5d04be7201908102dc9a782a9';\n// const url = `https://pixabay.com/api/?key=${API_key}&q=${API_key}&image_type=photo&orientation=horizontal&safesearch=true`;\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet pageNumber;\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', loadMore);\nlet searchParam;\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  pageNumber = 1;\n  let {\n    elements: { searchQuery },\n  } = event.currentTarget;\n  searchParam = searchQuery;\n  try {\n    const data = await fetchPictures(searchQuery);\n    const rendered = await renderGallery(data);\n    gallery.innerHTML = rendered.join('');\n    loadMoreBtn.classList.remove('visually-hidden');\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nasync function loadMore() {\n  pageNumber += 1;\n  const data = await fetchPictures(searchParam);\n  let morePics = '';\n  morePics += await renderGallery(data);\n  gallery.innerHTML = morePics;\n}\n\nasync function fetchPictures(search) {\n  // pageNumber += 1;\n  const url = `https://pixabay.com/api/?key=${API_key}&q=${search.value\n    .split(' ')\n    .join(\n      '+'\n    )}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${pageNumber}`;\n  console.log(url);\n  const response = await fetch(url);\n  const imgs = await response.json();\n  console.log(`\"Hooray! We found ${imgs.totalHits} images.\"`);\n\n  if (imgs.totalHits / 40 < pageNumber - 1) {\n    console.log(\"We're sorry, but you've reached the end of search results.\");\n    return;\n  }\n  return imgs.hits.map(img => {\n    return {\n      webformatURL: img.webformatURL,\n      largeImageURL: img.largeImageURL,\n      tags: img.tags,\n      likes: img.likes,\n      views: img.views,\n      comments: img.comments,\n      downloads: img.downloads,\n    };\n  });\n\n  // console.log(array);\n}\n\nasync function renderGallery(array) {\n  if (!array.length) {\n    console.log(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n    gallery.innerHTML = '';\n    loadMoreBtn.classList.add('visually-hidden');\n    // pageNumber = 1;\n  } else {\n    return array.map(\n      img =>\n        `<div class=\"photo-card\">\n        <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\" />\n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes</b>${img.likes}\n          </p>\n          <p class=\"info-item\">\n            <b>Views</b>${img.views}\n          </p>\n          <p class=\"info-item\">\n            <b>Comments</b>${img.comments}\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads</b>${img.downloads}\n          </p>\n        </div>\n      </div>`\n    );\n  }\n}\n"],"names":["$1f0dc3b9307be026$var$form","document","querySelector","$1f0dc3b9307be026$var$gallery","$1f0dc3b9307be026$var$loadMoreBtn","$1f0dc3b9307be026$var$pageNumber","$1f0dc3b9307be026$var$searchParam","async","$1f0dc3b9307be026$var$fetchPictures","search","url","value","split","join","console","log","response","fetch","imgs","json","totalHits","hits","map","img","webformatURL","largeImageURL","tags","likes","views","comments","downloads","$1f0dc3b9307be026$var$renderGallery","array","length","innerHTML","classList","add","addEventListener","event","preventDefault","elements","searchQuery","currentTarget","data","rendered","remove","error","message","morePics"],"version":3,"file":"index.1b298cf7.js.map"}